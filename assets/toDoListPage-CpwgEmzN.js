import{u as N,a as M,b as F,s as I,r as R,c as P,g as A,d as E,e as T,R as y,j as e,f as $,B as k,h as n,i as f}from"./index-DEitwcRm.js";import{u as G,I as H}from"./inputHook-DBhXGY6t.js";const V=()=>N(),b=M,B=()=>{const t=V(),c=b(s=>s.todo.todoList),l=b(s=>s.todo.todoList.filter(m=>m.done)),r=b(s=>s.todo.basket),i=b(s=>s.todo.todoList.filter(m=>!m.done));return{toDoList:c,basketList:r,inProcessList:i,doneList:l,setTodoList:s=>t(E(s)),setBasketList:s=>t(T(s)),addToList:s=>t(F(s)),setDone:s=>t(I(s)),setDelete:s=>t(R(s)),setDeleteAll:()=>t(P()),getFromBasket:s=>t(A(s))}},q="_item_1dtgu_1",w="_text_1dtgu_21",z="_done_1dtgu_31",J="_btns_1dtgu_39",j={item:q,text:w,done:z,btns:J},K=({text:t,done:c,onDelete:l,onDone:r,onBasket:i,basket:L=!0})=>e.jsxs("li",{className:$(j.item,c?j.done:""),children:[e.jsx("h2",{className:j.text,children:t}),e.jsx("div",{className:j.btns,children:L?e.jsx(k,{text:"Восстановить",onClick:i}):e.jsxs(e.Fragment,{children:[e.jsx(k,{text:c?"Не выполнено":"Выполнено",onClick:r}),e.jsx(k,{text:"Удалить",color:"red",onClick:l})]})})]}),O=y.memo(K),Q="_main_7rr7l_1",U="_title_7rr7l_11",W="_top_7rr7l_21",X="_topRight_7rr7l_33",Y="_topLeft_7rr7l_45",Z="_list_7rr7l_55",x={main:Q,title:U,top:W,topRight:X,topLeft:Y,list:Z};var v=(t=>(t[t.list=0]="list",t[t.doneList=1]="doneList",t[t.inProcessList=2]="inProcessList",t[t.basketList=3]="basketList",t[t.values=4]="values",t))(v||{});function tt(){const{toDoList:t,doneList:c,inProcessList:l,basketList:r}=B(),i=n.useMemo(()=>t,[t]),L=n.useMemo(()=>c,[c]),_=n.useMemo(()=>l,[l]),h=n.useMemo(()=>r,[r]),d=[{name:"Все",type:0,action:i},{name:"Готовые",type:1,action:L},{name:"В процессе",type:2,action:_},{name:"Корзина",type:3,action:h}],[D,p]=n.useState(i),[u,s]=n.useState(0);n.useEffect(()=>{d.map(a=>{u===a.type&&p(a.action)})},[u,i]);const m=n.useCallback(a=>{s(a)},[s]),g=d.map(a=>k({active:u===a.type,onClick:()=>m(a.type),text:`${a.name} (${a.action.length})`}));return{list:D,listType:u,btnsList:g}}const ot=()=>{const{addToList:t,setDone:c,setDelete:l,setDeleteAll:r,getFromBasket:i,setBasketList:L,setTodoList:_}=B(),{onInput:h,value:d,setValue:D}=G(),{list:p,listType:u,btnsList:s}=tt();n.useEffect(()=>{const o=f("basket")||[],C=f("todoList")||[];_(C),L(o)},[]);const m=()=>{d&&t(d),D("")},g=n.useCallback(o=>c(o),[c]),a=n.useCallback(o=>l(o),[l]),S=n.useCallback(o=>i(o),[i]);return e.jsxs("div",{className:x.main,children:[e.jsx("h1",{className:x.title,children:"Мои задачи"}),e.jsxs("div",{className:x.top,children:[e.jsxs("div",{className:x.topLeft,children:[e.jsx(H,{value:d,placeholder:"Моя задача",onInput:h}),e.jsx(k,{disabled:!d,onClick:m,text:"Добавить"}),e.jsx(k,{onClick:r,text:"Переместить все в корзину",color:"red"})]}),e.jsx("div",{className:x.topRight,children:s})]}),p.length>0?e.jsx("ul",{className:x.list,children:p.map(o=>e.jsx(O,{id:o.id,done:o.done,text:o.text,onDone:()=>g(o.id),onDelete:()=>a(o.id),onBasket:()=>S(o.id),basket:u===v.basketList},o.id))}):e.jsx("h2",{children:"Пусто"})]})};export{ot as ToDoListPage,ot as default};
